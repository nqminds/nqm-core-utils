{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap cba58bd0cacc5178851f","webpack:///./src/constants.js","webpack:///external {\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"_\",\"root\":\"_\"}","webpack:///./src/debug.js","webpack:///./src/build-data-key.js","webpack:///./src/databot-utils.js","webpack:///./src/flatten.js","webpack:///./src/resource-utils.js","webpack:///./src/schema-utils.js","webpack:///./src/short-hash.js","webpack:///./src/index.js","webpack:///external \"mongo-parse\""],"names":["readAccess","writeAccess","executeAccess","publicRWShareMode","publicROShareMode","trustedShareMode","resourceEventType","accountEventType","mongooseTypes","rootGroupResourceType","schemaResourceType","datasetResourceType","visualisationResourceType","groupResourceType","rawFileResourceType","vocabularyResourceType","widgetVisualisationResourceType","timeSeriesVisualisationResourceType","mapVisualisationResourceType","statusVisualisationResourceType","databotBaseType","databotResourceType","databotInstancesResourceType","databotInstanceOutputResourceType","databotProcessesResourceType","activeDatabotHostsResourceType","databotHostResourceType","databotGroupResourceType","databotHostGroupResourceType","databotControllerResourceType","datasetFilterResourceType","applicationBaseType","applicationResourceType","applicationGroupResourceType","applicationDataGroupResourceType","scratchGroupResourceType","rootResourceGroupResourceType","geojsonResourceType","userAccountType","tokenAccountType","hostAccountType","applicationAccountType","schemasResourceId","vocabularyResourceId","npmDatabotType","inlineDatabotType","zipDatabotType","githubDatabotType","urlDatabotType","browserHostType","serverHostType","databotInstancesResourceId","databotInstanceOutputResourceId","databotProcessesResourceId","activeDatabotHostsResourceId","unallocatedDatabotStatus","pendingDatabotStatus","installingDatabotStatus","partRunningDatabotStatus","runningDatabotStatus","pausedDatabotStatus","stoppingDatabotStatus","completeDatabotStatus","errorDatabotStatus","immediateDatabotInstanceRunMode","alwaysDatabotInstanceRunMode","scheduledDatabotInstanceRunMode","datasetImportDatabot","datasetCopyDatabot","onlineHostStatus","offlineHostStatus","idleHostStatus","busyHostStatus","errorHostStatus","resourceVocabularyId","datasetVocabularyId","folderVocabularyId","rawFileVocabularyId","visualisationVocabularyId","schemaVocabularyId","databotDefinitionVocabularyId","urlVocabularyId","builtIndexStatus","pendingIndexStatus","suspendingIndexStatus","suspendedIndexStatus","errorIndexStatus","googleAuthService","localAuthService","guestAccount","maxTimestamp","datasetStorePrefix","rootFolderPrefix","rootFolderName","scratchFolderPrefix","scratchFolderName","scratchFolderAlias","resourceFolderPrefix","resourceFolderName","applicationFolderPrefix","applicationFolderName","applicationDataFolderPrefix","applicationDataFolderName","databotFolderPrefix","databotFolderName","databotHostFolderPrefix","databotHostFolderName","identityFilterPlaceholder","exLog","console","log","apply","arguments","buildDataKey","fieldPaths","params","keys","forEach","f","key","asc","desc","pointers","DotNotationPointers","length","val","isDatabotInstanceRunning","databotInstance","status","flattenJSON","data","result","recurse","cur","prop","Object","Array","isArray","l","i","isEmpty","p","isResourceType","resource","type","schemaDefinition","id","basedOn","indexOf","baseType","getResourceTypeText","text","scheduledTasksResourceType","processHostsResourceType","getShareModeText","shareMode","display","primaryKeyFromFlattened","datum","uniqueIndex","idx","keyField","reservedFieldNames","indexToTDX","indexFields","errList","tdxIndex","fieldSpec","push","JSON","stringify","sortDirection","validateTDXType","properType","toLowerCase","schemaToTDX","schema","value","concat","__tdxType","validateMongooseType","capitalize","schemaToMongoose","each","v","k","required","__tdxRequired","default","__tdxDefault","__tdxDescription","definitionToMongoose","name","tdxSchema","indexes","nonUniqueIndexes","nonUniqueIndex","index","primaryIndex","dataSchema","mongooseSchema","Error","join","cloneDeep","bitwise","str","hash","ch","charCodeAt","binaryTransfer","integer","binary","stack","num","sign","table","t","Math","abs","floor","unique","replace","isEmailValid","address","test","isHostNameValid","hostname","isDateValid","d","prototype","toString","call","isNaN","getTime","isNumeric","n","parseFloat","isFinite","makeTDXAccount","email","tdx","splitTDXAccount","username","split","parseFunction","funcText","funcReg","match","exec","Function","constants","resourceUtils","databotUtils","schemaUtils","shortHash"],"mappings":"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","file":"nqm-core-utils.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(\"mongo-parse\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"nqm-core-utils\", [\"_\", \"mongo-parse\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"nqm-core-utils\"] = factory(require(\"lodash\"), require(\"mongo-parse\"));\n\telse\n\t\troot[\"nqm-core-utils\"] = factory(root[\"_\"], root[\"mongo-parse\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_10__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cba58bd0cacc5178851f","/* eslint-disable key-spacing, max-len */\nexport default {\n  // Resource access types\n  readAccess:  \"r\",\n  writeAccess: \"w\",\n  executeAccess: \"x\",\n\n  // Share modes\n  publicRWShareMode: \"pw\",    // public read and write\n  publicROShareMode: \"pr\",    // public read, trusted write\n  trustedShareMode:  \"tr\",    // trusted only\n\n  // Event types\n  resourceEventType: \"Resource\",\n  accountEventType:  \"Account\",\n\n  mongooseTypes: {\n    \"string\": 1,\n    \"number\": 1,\n    \"date\": 1,\n    \"boolean\": 1,\n  },\n\n  // Resource types (schema ids)\n  rootGroupResourceType:               \"rootGroup\",\n  schemaResourceType:                  \"schema\",\n  datasetResourceType:                 \"dataset\",\n  visualisationResourceType:           \"visualisation\",\n  groupResourceType:                   \"resourceGroup\",\n  rawFileResourceType:                 \"rawFile\",\n  vocabularyResourceType:              \"vocabulary\",\n  widgetVisualisationResourceType:     \"widgetVisualisation\",\n  timeSeriesVisualisationResourceType: \"timeSeriesVisualisation\",\n  mapVisualisationResourceType:        \"mapVisualisation\",\n  statusVisualisationResourceType:     \"statusVisualisation\",\n  databotBaseType:                     \"databot\",                   // base of all things 'databot'\n  databotResourceType:                 \"databotDefinition\",         // a databot definition\n  databotInstancesResourceType:        \"databotInstances\",          // system resource storing details of running databot instances\n  databotInstanceOutputResourceType:   \"databotInstanceOutput\",     // system resource storing databot instance output\n  databotProcessesResourceType:        \"databotProcesses\",          // system resource storing databot process info\n  activeDatabotHostsResourceType:      \"activeDatabotHosts\",        // system resource storing details of active databot hosts\n  databotHostResourceType:             \"databotHost\",               // system resources that mirror hostAccountType accounts to enable sharing\n  databotGroupResourceType:            \"databotGroup\",\n  databotHostGroupResourceType:        \"databotHostGroup\",\n  databotControllerResourceType:       \"databotController\",\n  datasetFilterResourceType:           \"datasetFilter\",\n  applicationBaseType:                 \"applicationBase\",\n  applicationResourceType:             \"application\",\n  applicationGroupResourceType:        \"applicationGroup\",\n  applicationDataGroupResourceType:    \"applicationDataGroup\",\n  scratchGroupResourceType:            \"scratchGroup\",\n  rootResourceGroupResourceType:       \"rootResourceGroup\",\n  geojsonResourceType:                 \"geojson\",\n\n  // Account types\n  userAccountType:  \"user\",\n  tokenAccountType: \"token\",\n  hostAccountType: \"host\",\n  applicationAccountType: \"application\",\n\n  // Default schema resource\n  schemasResourceId: \"__schemas__\",\n\n  // Default vocabulary resource\n  vocabularyResourceId: \"__vocab__\",\n\n  // Databot stuff.\n  npmDatabotType: \"npm\",\n  inlineDatabotType: \"script\",\n  zipDatabotType: \"zip\",\n  githubDatabotType: \"github\",\n  urlDatabotType: \"url\",\n\n  browserHostType: \"browser\",\n  serverHostType:  \"server\",\n\n  databotInstancesResourceId:      \"__databotInstances__\",\n  databotInstanceOutputResourceId: \"__databotInstanceOutput__\",\n  databotProcessesResourceId:      \"__databotProcesses__\",\n  activeDatabotHostsResourceId:    \"__activeDatabotHosts__\",\n\n  unallocatedDatabotStatus: \"unallocated\",\n  pendingDatabotStatus:     \"pending\",\n  installingDatabotStatus:  \"installing\",\n  partRunningDatabotStatus: \"partRunning\",\n  runningDatabotStatus:     \"running\",\n  pausedDatabotStatus:      \"paused\",\n  stoppingDatabotStatus:    \"stopping\",\n  completeDatabotStatus:    \"complete\",\n  errorDatabotStatus:       \"error\",\n\n  immediateDatabotInstanceRunMode: \"run-now\",\n  alwaysDatabotInstanceRunMode:    \"run-always\",\n  scheduledDatabotInstanceRunMode: \"scheduled\",\n\n  // Privileged databots\n  datasetImportDatabot:     \"__datasetImport__\",\n  datasetCopyDatabot:       \"__datasetCopy__\",\n\n  onlineHostStatus:  \"online\",\n  offlineHostStatus: \"offline\",\n  idleHostStatus:    \"idle\",\n  busyHostStatus:    \"busy\",\n  errorHostStatus:   \"error\",\n\n  resourceVocabularyId:          \"ResourceId\",\n  datasetVocabularyId:           \"DatasetId\",\n  folderVocabularyId:            \"FolderId\",\n  rawFileVocabularyId:           \"RawFileId\",\n  visualisationVocabularyId:     \"VisualisationId\",\n  schemaVocabularyId:            \"SchemaId\",\n  databotDefinitionVocabularyId: \"DatabotDefinitionId\",\n  urlVocabularyId:               \"Url\",\n\n  // Index status\n  builtIndexStatus:      \"built\",\n  pendingIndexStatus:    \"pending\",\n  suspendingIndexStatus: \"suspending\",\n  suspendedIndexStatus:  \"suspended\",\n  errorIndexStatus:      \"error\",\n\n  // Authentication services\n  googleAuthService:     \"oauth:google\",\n  localAuthService:      \"local\",\n\n  // Misc\n  guestAccount: \"...guest...\",\n  maxTimestamp: 8640000000000000,\n  datasetStorePrefix: \"dataset.\",\n\n  // Special folders\n  rootFolderPrefix: \"r.\",\n  rootFolderName: \"root\",\n\n  scratchFolderPrefix: \"s.\",\n  scratchFolderName: \"scratch\",\n  scratchFolderAlias: \"__scratch__\",      // Used in code to refer to the current users scratch folder.\n\n  resourceFolderPrefix: \"rs.\",\n  resourceFolderName: \"resources\",\n\n  applicationFolderPrefix: \"a.\",\n  applicationFolderName: \"applications\",\n\n  applicationDataFolderPrefix: \"ad.\",\n  applicationDataFolderName: \"application data\",\n\n  databotFolderPrefix: \"db.\",\n  databotFolderName: \"databots\",\n\n  databotHostFolderPrefix: \"dh.\",\n  databotHostFolderName: \"databot hosts\",\n\n  identityFilterPlaceholder: \"@@_identity_@@\",\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"_\",\"root\":\"_\"}\n// module id = 1\n// module chunks = 0","/* eslint-disable no-console */\n(function() {\n  const exLog = console.log;\n  console.log = function() {\n    // TODO - check for 'debug enabled' flag.\n    exLog.apply(this, arguments);\n  };\n})();\n\nexport default console.log;\n\n\n\n// WEBPACK FOOTER //\n// ./src/debug.js","import errLog from \"./debug\";\nimport parser from \"mongo-parse\";\nimport _ from \"lodash\";\n\n/*\n  * Extract a dictionary of values from params corresponding to the given array of field paths,\n  * where paths use the dot notation, e.g. address.postcode.\n  */\nconst buildDataKey = function(fieldPaths, params) {\n  const keys = {};\n  _.forEach(fieldPaths, function(f) {\n    // Get the field path.\n    const key = f.asc || f.desc;\n    const pointers = parser.DotNotationPointers(params, key);\n    if (pointers.length === 0 || typeof pointers[0].val === \"undefined\") {\n      errLog(\"no key data for field '%s' in %j\", key, params);\n    } else {\n      keys[key] = pointers[0].val;\n    }\n  });\n\n  return keys;\n};\n\nexport default buildDataKey;\n\n\n\n// WEBPACK FOOTER //\n// ./src/build-data-key.js","import constants from \"./constants\";\n\nconst isDatabotInstanceRunning = function(databotInstance) {\n  return databotInstance && (\n    databotInstance.status === constants.runningDatabotStatus ||\n    databotInstance.status === constants.installingDatabotStatus ||\n    databotInstance.status === constants.partRunningDatabotStatus ||\n    databotInstance.status === constants.pausedDatabotStatus\n  );\n};\n\nexport default {\n  isDatabotInstanceRunning: isDatabotInstanceRunning,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/databot-utils.js","const flattenJSON = function(data) {\n  const result = {};\n  function recurse(cur, prop) {\n    if (Object(cur) !== cur) {\n      result[prop] = cur;\n    } else if (Array.isArray(cur)) {\n      const l = cur.length;\n      for (let i = 0; i < l; i++) {\n        recurse(cur[i], `${prop}.${i}`);\n      }\n      if (l === 0)\n        result[prop] = [];\n    } else {\n      let isEmpty = true;\n      for (const p in cur) {\n        isEmpty = false;\n        recurse(cur[p], prop ? `${prop}.${p}` : p);\n      }\n      if (isEmpty && prop)\n        result[prop] = {};\n    }\n  }\n  recurse(data, \"\");\n  return result;\n};\n\nexport default flattenJSON;\n\n\n\n// WEBPACK FOOTER //\n// ./src/flatten.js","import constants from \"./constants\";\nimport _ from \"lodash\";\n\nconst isResourceType = function(resource, type) {\n  return (\n    resource.schemaDefinition ?\n    (resource.schemaDefinition.id === type || (resource.schemaDefinition.basedOn && resource.schemaDefinition.basedOn.indexOf(type) >= 0)) :  // eslint-disable-line max-len\n    resource.baseType === type\n  );\n};\n\nconst getResourceTypeText = function(type) {\n  let text;\n  switch (type) {\n    case constants.groupResourceType:\n      text = \"folder\";\n      break;\n    case constants.rawFileResourceType:\n      text = \"raw file\";\n      break;\n    case constants.widgetVisualisationResourceType:\n      text = \"widget visualisation\";\n      break;\n    case constants.timeSeriesVisualisationResourceType:\n      text = \"time series visualisation\";\n      break;\n    case constants.mapVisualisationResourceType:\n      text = \"map visualisation\";\n      break;\n    case constants.statusVisualisationResourceType:\n      text = \"status visualisation\";\n      break;\n    case constants.scheduledTasksResourceType:\n      text = \"scheduled tasks\";\n      break;\n    case constants.processHostsResourceType:\n      text = \"process hosts\";\n      break;\n    default:\n      // Most single word resource types are OK.\n      text = type;\n      break;\n  }\n  return text;\n};\n\nconst getShareModeText = function(shareMode) {\n  let display;\n  switch (shareMode) {\n    case constants.publicRWShareMode:\n      display = \"public view and edit\";\n      break;\n    case constants.publicROShareMode:\n      display = \"public view, trusted edit\";\n      break;\n    case constants.trustedShareMode:\n      display = \"trusted only\";\n      break;\n    default:\n      display = \"!!unknown!!\";\n      break;\n  }\n  return display;\n};\n\nconst primaryKeyFromFlattened = function(resource, datum) {\n  // Create primary key from flattened data.\n  const key = {};\n  _.forEach(resource.schemaDefinition.uniqueIndex, (idx) => {\n    const keyField = idx.asc || idx.desc;\n    key[keyField] = datum[keyField];\n  });\n\n  return key;\n};\n\nexport default {\n  getResourceTypeText: getResourceTypeText,\n  getShareModeText: getShareModeText,\n  isResourceType: isResourceType,\n  primaryKeyFromFlattened: primaryKeyFromFlattened,\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/resource-utils.js","/* eslint-disable no-underscore-dangle */\nimport _ from \"lodash\";\nimport log from \"./debug\";\nimport errLog from \"./debug\";\nimport constants from \"./constants\";\n\n// From mongoose/lib/schema.js\nconst reservedFieldNames = [\n  \"_id\",              // <---- TDX specific\n  \"prototype\",\n  // EventEmitter\n  \"emit\",\n  \"on\",\n  \"once\",\n  \"listeners\",\n  \"removeListener\",\n  // document properties and functions\n  \"collection\",\n  \"db\",\n  \"errors\",\n  \"init\",\n  \"isModified\",\n  \"isNew\",\n  \"get\",\n  \"modelName\",\n  \"save\",\n  \"schema\",\n  \"set\",\n  \"toObject\",\n  \"validate\",\n  \"remove\",\n  // hooks.js\n  \"_pres\",\n  \"_posts\",\n];\n\n// Convert from simple array list to TDX index format.\n// Assume ascending sort direction.\n// e.g. [\"id\", \"code\"] => [{asc: \"id\"}, {asc: \"code\"}]\n//\n// Will also convert from mongoose index spec to tdx format.\n// e.g. {id: 1, code: -1} => [{asc: \"id\"}, {desc: \"code\"}]\n//\nconst indexToTDX = function(indexFields, errList) {\n  const tdxIndex = [];\n\n  if (Array.isArray(indexFields)) {\n    _.forEach(indexFields, function(fieldSpec) {\n      if (typeof fieldSpec === \"string\") {\n        tdxIndex.push({\"asc\": fieldSpec});\n      } else if (fieldSpec.asc || fieldSpec.desc) {\n        tdxIndex.push(fieldSpec);\n      } else {\n        errList.push(`invalid index spec: ${JSON.stringify(fieldSpec)}`);\n      }\n    });\n  } else if (typeof indexFields === \"object\") {\n    _.forEach(indexFields, function(sortDirection, key) {\n      if (sortDirection === -1) {\n        tdxIndex.push({desc: key});\n      } else {\n        tdxIndex.push({asc: key});\n      }\n    });\n  }\n\n  return tdxIndex;\n};\n\nconst validateTDXType = function(type, errList) {\n  let properType;\n  type = type.toLowerCase();\n  if (!constants.mongooseTypes[type]) {\n    errList.push(`invalid base type: ${type}`);\n  } else {\n    properType = type;\n  }\n  return properType;\n};\n\n// Converts a schema from mongoose to TDX format.\nconst schemaToTDX = function(schema, errList) {\n  if (typeof schema === \"object\") {\n    _.forEach(schema, function(value, key) {\n      if (key === \"__tdxType\") {\n        // Ensure array type list.\n        schema[key] = [].concat(value);\n      } else if (key === \"__tdxRequired\" || key === \"__tdxDefault\" || key === \"__tdxDescription\") {\n        // Do nothing.\n      } else if (Array.isArray(value)) {\n        if (value.length === 1) {\n          value[0] = schemaToTDX(value[0], errList);\n        } else {\n          // Assume a 'mixed' mongoose type.\n          schema[key] = [];\n        }\n      } else if (typeof value === \"object\") {\n        // Recurse for sub-documents\n        schema[key] = schemaToTDX(value, errList);\n      } else if (key === \"type\" && typeof value === \"string\") {\n        // A mongoose-style {type: \"String\"} specification.\n        // Convert to TDX format.\n        schema.__tdxType = [validateTDXType(value, errList)];\n        delete schema.type;\n      } else if (typeof value === \"string\") {\n        schema[key] = {__tdxType: [validateTDXType(value, errList)]};\n      } else {\n        errList.push(`invalid schema definition, unexpected: ${schema}`);\n      }\n    });\n\n    return schema;\n  } else if (typeof schema === \"string\") {\n    return {__tdxType: [validateTDXType(schema, errList)]};\n  } else {\n    errList.push(`invalid schema definition, unexpected: ${schema}`);\n  }\n};\n\nconst validateMongooseType = function(type, errList) {\n  let properType;\n  type = type.toLowerCase();\n  if (!constants.mongooseTypes[type]) {\n    errList.push(`invalid base type: ${type}`);\n  } else {\n    properType = _.capitalize(type);\n  }\n  return properType;\n};\n\nconst schemaToMongoose = function(schema, errList) {\n  errList = errList || [];\n\n  _.each(schema, function(v, k) {\n    if (reservedFieldNames.indexOf(k) >= 0) {\n      errLog(\"invalid field name (reserved): %s\", k);\n      errList.push(`invalid field name (reserved): ${k}`);\n    } else if (k === \"__tdxRequired\") {\n      schema.required = schema.__tdxRequired;\n      delete schema.__tdxRequired;\n    } else if (k === \"__tdxDefault\") {\n      schema.default = schema.__tdxDefault;\n      delete schema.__tdxDefault;\n    } else if (k === \"__tdxDescription\") {\n      // Remove this as it's TDX documentation.\n      delete schema.__tdxDescription;\n    } else if (k === \"__tdxType\") {\n      // This is an explicit type specification,  e.g. { __tdxType: [\"string\",\"geographic\",\"address\",\"postcode\"]}\n      if (!v) {\n        errLog(\"unexpected __tdxType value: %j\", v);\n        errList.push(\"missing __tdxType\");\n      } else {\n        // Ensure type is an array.\n        v = [].concat(v);\n        delete schema.__tdxType;\n        // The base type is the first element and should be a valid mongoose type\n        schema.type = v[0].toLowerCase();\n        if (schema.type === \"object\") {\n          schema = {};\n        } else if (schema.type === \"array\") {\n          schema = [];\n        } else {\n          schema.type = validateMongooseType(schema.type, errList);\n        }\n      }\n    } else if (Array.isArray(v)) {\n      // Array\n      if (v.length > 1) {\n        errList.push(`invalid array type specification for key: ${k}`);\n      } else if (v.length > 0) {\n        if (typeof v[0] === \"string\") {\n          schema[k] = {type: validateMongooseType(v[0], errList)};\n        } else {\n          schema[k] = [schemaToMongoose(v[0], errList)];\n        }\n      }\n    } else if (typeof v === \"object\") {\n      // Sub-document\n      schema[k] = schemaToMongoose(v, errList);\n    } else if (typeof v !== \"string\") {\n      // TODO - review\n      // Don't treat this as an error, just ignore.\n      // Seems to be caused be some legacy schema definitions with { default: true, required: true } etc.\n      // errList.push(\"invalid schema definition - unexpected type for key '\" + k + \"': \" + (typeof v));\n      errLog(`invalid schema definition - unexpected type for key '${k}' : ${(typeof v)}`);\n      delete schema[k];\n    } else {\n      schema[k] = {type: validateMongooseType(v, errList)};\n    }\n  });\n\n  return schema;\n};\n\nconst definitionToMongoose = function(name, tdxSchema) {\n  const uniqueIndex = tdxSchema.uniqueIndex;\n  const indexes = tdxSchema.nonUniqueIndexes;\n\n  // Convert any given indexes to mongodb format\n  //\n  // Because these dynamic schema definitions are stored in mongodb as documents,\n  // we have to store them in a backwards fashion as mongodb does not allow\n  // key names to contain periods. For example, if the index was saved\n  // as { \"address.postcode\": 1 } mongodb would complain about \"address.postcode\".\n  //\n  // So we store indexes (which are likely to contain dots e.g. if indexing\n  // on nested document) in the form:\n  //\n  // { \"asc\": \"my.nested.key\" } or { \"desc\": \"address.postcode\" }\n  //\n  // Here we convert this stored format to mongodb format so the index can be created.\n  //\n  // The 'indexes' parameter should be an array of arrays of index specifiers, e.g.\n  // the following specifies two indexes, one is a compound index on account and order,\n  // the other is an individual index on completedAt:\n  //\n  // [ [ { \"asc\": \"account\" }, { \"asc\": \"order\" } ], [ {\"asc\": \"completedAt\" } ] ]\n  //\n  // this should translate to a single array of objects, e.g.:\n  //\n  // [ { account: 1 , order: 1 }, { completedAt: 1} ]\n  //\n  const nonUniqueIndexes = [];\n  _.forEach(indexes, function(nonUniqueIndex) {\n    if (nonUniqueIndex.length > 0) {\n      const index = {};\n      _.forEach(nonUniqueIndex, function(i) {\n        index[i.asc || i.desc] = (i.asc ? 1 : -1);\n      });\n      nonUniqueIndexes.push(index);\n    }\n  });\n  log(\"translated non unique indexes for %s from %j to %j\", name, indexes, nonUniqueIndexes);\n\n  // Do the same for the unique index.\n  // Use the 'uniqueIndex' parameter to set the PK of the schema.\n  // Do this rather than use the built-in mongoose specification in order\n  // to support compound indexes, where the order of fields is important.\n  //\n  // See comment above for index format explanation.\n  const primaryIndex = {};\n  _.forEach(uniqueIndex, function(i) {\n    primaryIndex[i.asc || i.desc] = (i.asc ? 1 : -1);\n  });\n  log(\"translated primary index for %s from %j to %j\", name, uniqueIndex, primaryIndex);\n\n  //\n  // Remove all index information from the schema, as we set the indexes\n  // manually below.\n  //\n  log(\"transforming schema for %s: %j\", tdxSchema.id, tdxSchema.dataSchema);\n  const errList = [];\n  const mongooseSchema = schemaToMongoose(tdxSchema.dataSchema, errList);\n  if (errList.length) {\n    throw new Error(`invalid mongoose schema: ${errList.join(\",\")}`);\n  }\n\n  log(\"schema transformed to %j\", mongooseSchema);\n\n  return {\n    schema: mongooseSchema,\n    uniqueIndex: primaryIndex,\n    nonUniqueIndexes: nonUniqueIndexes,\n  };\n};\n\nexport default {\n  definitionToMongoose: definitionToMongoose,\n  schemaToMongoose: function(tdxSchema, errList) {\n    return schemaToMongoose(_.cloneDeep(tdxSchema), errList);\n  },\n  schemaToTDX: function(mongooseSchema, errList) {\n    return schemaToTDX(_.cloneDeep(mongooseSchema), errList);\n  },\n  indexToTDX: indexToTDX,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/schema-utils.js","/* eslint-disable */\n/*\n\tshorthash\n\t(c) 2013 Bibig\n\t\n\thttps://github.com/bibig/node-shorthash\n\tshorthash may be freely distributed under the MIT license.\n*/\n\n// refer to: http://werxltd.com/wp/2010/05/13/javascript-implementation-of-javas-string-hashcode-method/\nfunction bitwise(str){\n\tvar hash = 0;\n\tif (str.length == 0) return hash;\n\tfor (var i = 0; i < str.length; i++) {\n\t\tvar ch = str.charCodeAt(i);\n\t\thash = ((hash<<5)-hash) + ch;\n\t\thash = hash & hash; // Convert to 32bit integer\n\t}\n\treturn hash;\n}\n\n// 10进制转化成62进制以内的进制\n// convert 10 binary to customized binary, max is 62\nfunction binaryTransfer(integer, binary) {\n\tbinary = binary || 62;\n\tvar stack = [];\n\tvar num;\n\tvar result = '';\n\tvar sign = integer < 0 ? '-' : '';\n\t\n\tfunction table (num) {\n\t\tvar t = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\t\treturn t[num];\n\t}\n\t\n\tinteger = Math.abs(integer);\n\t\n\twhile (integer >= binary) {\n\t\tnum = integer % binary;\n\t\tinteger = Math.floor(integer / binary);\n\t\tstack.push(table(num));\n\t}\n\t\n\tif (integer > 0) {\n\t\tstack.push(table(integer));\n\t}\n\t\n\tfor (var i = stack.length - 1; i >= 0; i--) {\n\t\tresult += stack[i];\n\t} \n\t\n\treturn sign + result;\n}\n\n\n/**\n * why choose 61 binary, because we need the last element char to replace the minus sign\n * eg: -aGtzd will be ZaGtzd\n */\nfunction unique (text) {\n\tvar id = binaryTransfer(bitwise(text), 61);\n\treturn id.replace('-', 'Z');\n}\n\nexport default {\n  bitwise,\n  binaryTransfer,\n  unique\n};\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/short-hash.js","/* eslint-disable max-len */\nimport constants from \"./constants\";\nimport resourceUtils from \"./resource-utils\";\nimport databotUtils from \"./databot-utils\";\nimport schemaUtils from \"./schema-utils\";\nimport flattenJSON from \"./flatten\";\nimport buildDataKey from \"./build-data-key\";\nimport shortHash from \"./short-hash\";\n\nconst isEmailValid = function(address) {\n  // TODO - improve this (use mailgun?)\n  return /^[A-Z0-9'.1234z_%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(address);\n};\n\nconst isHostNameValid = function(hostname) {\n  // From http://stackoverflow.com/a/106223\n  return /^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9])$/.test(hostname);\n};\n\nconst isDateValid = function(d) {\n  // From http://stackoverflow.com/q/1353684\n  if (Object.prototype.toString.call(d) !== \"[object Date]\")\n    return false;\n  return !isNaN(d.getTime());\n};\n\nconst isNumeric = function(n) {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n};\n\nconst makeTDXAccount = function(email, tdx) {\n  /*\n    * tdx accounts are stored in email/hostname format, e.g. toby.ealden@gmail.com/tdx.nqminds.com\n    */\n  return `${email}/${tdx}`;\n};\n\nconst splitTDXAccount = function(username) {\n  /*\n    * tdx accounts are stored in email/hostname format, e.g. toby.ealden@gmail.com/tdx.nqminds.com\n    */\n  let result;\n  const split = username.toLowerCase().split(\"/\");\n  if (split.length === 2 && isEmailValid(split[0]) && (isHostNameValid(split[1]) || split[1].indexOf(\"localhost:\") === 0)) {\n    result = {\n      email: split[0],\n      tdx: split[1],\n    };\n  }\n  return result;\n};\n\nconst parseFunction = function(funcText) {\n  const funcReg = /function *\\(([^()]*)\\)[ \\n\\t]*{(.*)}/gmi;\n  const match = funcReg.exec(funcText.replace(/\\n/g, \" \"));\n\n  if (match) {\n    return new Function(match[1].split(\",\"), match[2]);\n  }\n\n  return null;\n};\n\nexport {\n  constants,\n  resourceUtils,\n  databotUtils,\n  schemaUtils,\n  flattenJSON,\n  buildDataKey,\n  shortHash,\n  isEmailValid,\n  isDateValid,\n  isHostNameValid,\n  isNumeric,\n  makeTDXAccount,\n  splitTDXAccount,\n  parseFunction,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_10__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongo-parse\"\n// module id = 10\n// module chunks = 0"],"sourceRoot":""}